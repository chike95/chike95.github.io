(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{302:function(s,t,a){s.exports=a.p+"assets/img/ssh_22.1b7a80d1.png"},303:function(s,t,a){s.exports=a.p+"assets/img/ssh_logo.4f244959.png"},304:function(s,t,a){s.exports=a.p+"assets/img/ssh1.1a9a623e.png"},305:function(s,t,a){s.exports=a.p+"assets/img/ssh2.5099512b.png"},306:function(s,t,a){s.exports=a.p+"assets/img/ssh_mysql.61a77a63.png"},446:function(s,t,a){"use strict";a.r(t);var e=a(14),r=Object(e.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"ssh"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ssh"}},[s._v("#")]),s._v(" SSH")]),s._v(" "),t("p",[s._v("介绍：SSH 协议：安全外壳协议，为 Secure Shell 的缩写。SSH 为建立在应用层和传输层基础上的安全协议。")]),s._v(" "),t("h2",{attrs:{id:"反向代理"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#反向代理"}},[s._v("#")]),s._v(" 反向代理")]),s._v(" "),t("p",[s._v("外网访问内网服务器："),t("a",{attrs:{href:"https://www.bilibili.com/video/BV1k7411E76H/",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://www.bilibili.com/video/BV1k7411E76H/"),t("OutboundLink")],1)]),s._v(" "),t("p",[t("img",{attrs:{src:a(302),alt:"Alt text"}})]),s._v(" "),t("h3",{attrs:{id:"免密登录"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#免密登录"}},[s._v("#")]),s._v(" 免密登录")]),s._v(" "),t("p",[s._v("（1）切换使用root 用户")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("su \n\n>>输入root密码\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("p",[s._v("如果没有为root创建密码则先设置")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("sudo passwd root \n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("(2)生成密钥")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("ssh-keygen\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("(3)将生成的公钥拷贝到要映射的主机")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("ssh-copy-id -i ~/.ssh/id_rsa.pub root@123.206.175.1\nssh-copy-id root@123.206.175.1\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[s._v("(4)测试免密登陆")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ssh")]),s._v(" root@123.206.175.1\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h3",{attrs:{id:"代理设置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#代理设置"}},[s._v("#")]),s._v(" 代理设置")]),s._v(" "),t("h4",{attrs:{id:"_1-内网设置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-内网设置"}},[s._v("#")]),s._v(" （1）内网设置")]),s._v(" "),t("p",[s._v("将内网服务器的22 端口代理到公网云主机（123.206.175.1）的50722端口")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" autossh "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-M")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("50721")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-fCNR")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'*:50722:127.0.0.1:22'")]),s._v(" root@123.206.175.1\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("-M: 指定反向代理的端口")]),s._v(" "),t("p",[s._v("-f: 后台运行")]),s._v(" "),t("p",[s._v("-C: 压缩数据传输")]),s._v(" "),t("p",[s._v("-N: 禁止ssh直接登录")]),s._v(" "),t("p",[s._v("-R: 指定反向代理的地址和端口")]),s._v(" "),t("br"),s._v(" "),t("h4",{attrs:{id:"_2-本地连接"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-本地连接"}},[s._v("#")]),s._v(" （2）本地连接")]),s._v(" "),t("p",[t("img",{attrs:{src:a(303),alt:"Alt text"}})]),s._v(" "),t("p",[s._v("本地外网使用ssh连接云主机的50722端口，输入内网服务器的账号密码即可访问")]),s._v(" "),t("h3",{attrs:{id:"应用代理"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#应用代理"}},[s._v("#")]),s._v(" 应用代理")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" autossh "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-M")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("40001")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-fCNR")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'*:53319:127.0.0.1:53319'")]),s._v(" root@123.206.175.1\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("通过：https://123.206.175.1:53319 即可访问内网的应用服务")]),s._v(" "),t("h2",{attrs:{id:"端口转发"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#端口转发"}},[s._v("#")]),s._v(" 端口转发")]),s._v(" "),t("p",[s._v("端口转发："),t("a",{attrs:{href:"https://www.bilibili.com/video/BV1C7411P7Er/",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://www.bilibili.com/video/BV1C7411P7Er/"),t("OutboundLink")],1)]),s._v(" "),t("h3",{attrs:{id:"本地转发"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#本地转发"}},[s._v("#")]),s._v(" 本地转发")]),s._v(" "),t("p",[t("img",{attrs:{src:a(304),alt:"Alt text"}})]),s._v(" "),t("p",[s._v("云主机：47.100.18.162")]),s._v(" "),t("p",[s._v("将远程服务器的13000端口代理到本地17000")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("ssh -CNR 13000:127.0.0.1:17000 tonglei@123.206.175.241 -p 50532\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h3",{attrs:{id:"远程转发"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#远程转发"}},[s._v("#")]),s._v(" 远程转发")]),s._v(" "),t("p",[t("img",{attrs:{src:a(305),alt:"Alt text"}})]),s._v(" "),t("h3",{attrs:{id:"转发-mysql"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#转发-mysql"}},[s._v("#")]),s._v(" 转发 MYSQL")]),s._v(" "),t("p",[t("a",{attrs:{href:"https://www.bilibili.com/video/BV1tU4y1i7rR/",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://www.bilibili.com/video/BV1tU4y1i7rR/"),t("OutboundLink")],1)]),s._v(" "),t("p",[t("img",{attrs:{src:a(306),alt:"Alt text"}})]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("ssh -CfNg -L 3310:127.0.0.1:3306 root@123.206.175.1\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("ssh -CfNg -L 8101:127.0.0.1:3306 root@123.206.175.241 -p 50552")])])}),[],!1,null,null,null);t.default=r.exports}}]);